(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{118:function(e,t,n){},155:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(29),i=n.n(r),s=(n(118),n(59)),l=n(212),o=n(213),j=n(215),u=n(216),d=n(217),b=n(15),h=n(38),O=n.n(h),p="USER_LOADING",x="USER_LOADED",f="AUTH_ERROR",g="LOGIN_SUCCESS",m="LOGIN_FAIL",v="LOGOUT_SUCCESS",y="REGISTER_SUCCESS",S="REGISTER_FAIL",E="GET_ERRORS",C="CLEAR_ERRORS",w=function(e,t,n){return{type:E,payload:{msg:e,status:t,id:n}}},U="https://urlshort-backend.herokuapp.com",k=n(17),R=n(2),L=function(){var e=Object(b.c)((function(e){return e.auth})),t=Object(b.b)(),n=Object(k.g)();return Object(R.jsx)(l.a,{sx:{flexGrow:1},children:Object(R.jsx)(o.a,{position:"static",children:Object(R.jsxs)(j.a,{children:[Object(R.jsx)(u.a,{variant:"h3",sx:{flexGrow:1},children:"TinyUrl"}),Object(R.jsx)(d.a,{onClick:function(e){e.preventDefault(),n.push("/")},color:"inherit",children:"Home"}),Object(R.jsx)(d.a,{onClick:function(e){e.preventDefault(),n.push("/myurls")},color:"inherit",children:"MyUrls"}),e.isAuthenticated?Object(R.jsx)(d.a,{onClick:function(e){e.preventDefault(),t({type:v})},color:"inherit",children:"Logout"}):Object(R.jsx)(d.a,{href:"/login",color:"inherit",children:"SignIn"}),Object(R.jsx)(d.a,{href:"/register",color:"inherit",children:"SignUp"})]})})})},I=n(54),_=n.n(I),T=n(74),A=O.a.create({baseURL:"https://urlshort-backend.herokuapp.com"}),N=function(){var e=Object(T.a)(_.a.mark((function e(t){var n,a;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,A.get("/get");case 3:n=e.sent,a=n.data,t({type:"FETCH",payload:a}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),D=function(e){return function(t){var n={email:e};O.a.post("".concat("https://urlshort-backend.herokuapp.com","/users"),n,{headers:{"Content-Type":"application/json"}}).then((function(e){return t({type:"FETCH_USER_URLS",payload:e.data})})).catch((function(e){console.log(e)}))}},F=n(12),G=n(218),H=n(214),W=n(206),P=n(219),B=n(95),J=n(96),X=n.n(J),z=n(211),M=n(198),V=n(199),q=n(200),K=n(201),Q=n(202),Y=n(203),Z=n(207),$=Object(Z.a)({shareIcon:{paddingRight:"15px"},share:{marginLeft:"-25px"}}),ee=function(){var e=$(),t=Object(b.c)((function(e){return e.ur.urls}));return Object(R.jsx)(R.Fragment,{children:Object(R.jsxs)(G.a,{maxWidth:"sm",children:[Object(R.jsx)(u.a,{className:e.share,variant:"h6",children:"Share"}),Object(R.jsxs)(z.a,{container:!0,spacing:0,children:[Object(R.jsx)(z.a,{item:!0,className:e.shareIcon,children:Object(R.jsx)(B.CopyToClipboard,{text:t[0]?t[0].shortenedUrl:null,children:Object(R.jsx)(X.a,{size:60,children:Object(R.jsx)(d.a,{onClick:function(e){e.preventDefault()},children:"Copy"})})})}),Object(R.jsx)(z.a,{item:!0,className:e.shareIcon,children:Object(R.jsx)(M.a,{url:t[0]?t[0].shortenedUrl:null,children:Object(R.jsx)(V.a,{round:!0})})}),Object(R.jsx)(z.a,{item:!0,className:e.shareIcon,children:Object(R.jsx)(q.a,{url:t[0]?t[0].shortenedUrl:null,children:Object(R.jsx)(K.a,{round:!0})})}),Object(R.jsx)(z.a,{item:!0,className:e.shareIcon,children:Object(R.jsx)(Q.a,{url:t[0]?t[0].shortenedUrl:null,children:Object(R.jsx)(Y.a,{round:!0})})})]})]})})},te=Object(Z.a)({paper:{borderRadius:"10px"},textField:{display:"block",height:"23px",width:"440px,",padding:"17px 14px 17px 14px",minHeight:"auto",border:"1px solid #bebcbc",borderRadius:"5px"},formContainer:{marginTop:"20px"}}),ne=function(){var e=te(),t=Object(a.useState)({full:""}),n=Object(F.a)(t,2),c=n[0],r=n[1],i=Object(b.c)((function(e){return e.ur.urls})),s=Object(b.c)((function(e){return e.auth})),o=s.isAuthenticated,j=Object(b.b)();return Object(R.jsx)(G.a,{className:e.formContainer,maxWidth:"sm",children:Object(R.jsx)(H.a,{className:e.paper,elevation:3,children:Object(R.jsxs)("form",{children:[Object(R.jsx)(l.a,{p:2,children:Object(R.jsx)(u.a,{align:"center",variant:"h6",children:"Enter a long URL to make a TinyURL"})}),Object(R.jsx)(l.a,{p:2,children:Object(R.jsx)(W.a,{id:"outlined-basic",label:"url",type:"text",variant:"outlined",value:c.full,onChange:function(e){r(o?{full:e.target.value,ownedBy:s.user.email}:{full:e.target.value})},fullWidth:!0})}),Object(R.jsx)(l.a,{p:2,children:Object(R.jsx)(u.a,{variant:"h6",children:"Tiny Url"})}),Object(R.jsx)(l.a,{p:2,children:Object(R.jsx)("div",{className:e.textField,children:Object(R.jsx)(u.a,{variant:"h8",children:i[0]?Object(R.jsx)(P.a,{href:i[0].shortenedUrl,children:i[0].shortenedUrl}):null})})}),Object(R.jsx)(l.a,{p:2,children:Object(R.jsx)(ee,{})}),Object(R.jsx)(l.a,{p:2,children:Object(R.jsx)(d.a,{variant:"contained",onClick:function(e){var t;e.preventDefault(),j((t=c,function(){var e=Object(T.a)(_.a.mark((function e(n){var a,c;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r=t,A.post("/create",r);case 3:a=e.sent,c=a.data,n({type:"CREATE",payload:c}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}var r}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()))},children:"Make TinyURL"})})]})})})},ae=n(47),ce=n(209),re=function(){var e=Object(a.useState)(""),t=Object(F.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(""),i=Object(F.a)(r,2),s=i[0],o=i[1],j=Object(a.useState)(""),h=Object(F.a)(j,2),p=h[0],x=h[1],f=Object(a.useState)(null),g=Object(F.a)(f,2),m=g[0],v=g[1],E=Object(a.useState)({full:""}),C=Object(F.a)(E,2),L=(C[0],C[1],Object(b.b)()),I=Object(b.c)((function(e){return e.auth})),_=Object(b.c)((function(e){return e.err}));if(Object(a.useEffect)((function(){"REGISTER_FAIL"===_.id?v(_.msg.msg):v(null),I.isAuthenticated&&console.log(I.user.email)}),[I]),I.isAuthenticated)return Object(R.jsx)(k.a,{to:"/"});return Object(R.jsx)(l.a,{sx:{display:"flex",flexDirection:"column",flexWrap:"wrap","& > :not(style)":{m:1,width:500,height:500}},children:Object(R.jsxs)(H.a,{elevation:3,children:[m?Object(R.jsx)(ce.a,{severity:"warning",children:m}):null,Object(R.jsxs)("form",{children:[Object(R.jsx)(l.a,{p:2,children:Object(R.jsx)(u.a,{children:"Name"})}),Object(R.jsx)(l.a,{p:2,children:Object(R.jsx)(W.a,{type:"text",id:"outlined-basic",label:"Name",variant:"outlined",onChange:function(e){return c(e.target.value)}})}),Object(R.jsx)(l.a,{p:2,children:Object(R.jsx)(u.a,{children:"Email"})}),Object(R.jsx)(l.a,{p:2,children:Object(R.jsx)(W.a,{type:"text",id:"outlined-basic",label:"Email",variant:"outlined",onChange:function(e){return o(e.target.value)}})}),Object(R.jsx)(l.a,{p:2,children:Object(R.jsx)(u.a,{children:"Password"})}),Object(R.jsx)(l.a,{p:2,children:Object(R.jsx)(W.a,{id:"outlined-basic",type:"password",label:"password",variant:"outlined",onChange:function(e){return x(e.target.value)}})}),Object(R.jsx)(l.a,{p:2,children:Object(R.jsx)(d.a,{onClick:function(e){e.preventDefault(),L(function(e){var t=e.name,n=e.email,a=e.password;return function(e){var c=JSON.stringify({name:t,email:n,password:a});O.a.post("".concat(U,"/user"),c,{headers:{"Content-Type":"application/json"}}).then((function(t){return e({type:y,payload:t.data})})).catch((function(t){e(w(t.response.data,t.response.status,"REGISTER_FAIL")),e({type:S})}))}}({name:n,email:s,password:p})),I.isAuthenticated&&L(D(I.user.email))},variant:"contained",children:"SignUp"})})]})]})})},ie=function(){var e=Object(a.useState)(""),t=Object(F.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(""),i=Object(F.a)(r,2),s=i[0],o=i[1],j=Object(a.useState)(null),h=Object(F.a)(j,2),p=h[0],x=h[1],f=Object(b.b)(),v=Object(b.c)((function(e){return e.auth})),y=Object(b.c)((function(e){return e.err}));if(Object(a.useEffect)((function(){"LOGIN_FAIL"===y.id?x(y.msg.msg):x(null),v.isAuthenticated&&(console.log(v.user.email),f(D(v.user.email)))}),[v]),v.isAuthenticated)return Object(R.jsx)(k.a,{to:"/"});return Object(R.jsx)(l.a,{sx:{display:"flex",flexDirection:"column",flexWrap:"wrap","& > :not(style)":{m:1,width:500,height:500}},children:Object(R.jsxs)(H.a,{elevation:3,children:[p?Object(R.jsx)(ce.a,{severity:"warning",children:p}):null,Object(R.jsxs)("form",{children:[Object(R.jsx)(l.a,{p:2,children:Object(R.jsx)(u.a,{children:"Email"})}),Object(R.jsx)(l.a,{p:2,children:Object(R.jsx)(W.a,{type:"text",id:"outlined-basic",label:"Email",variant:"outlined",onChange:function(e){return c(e.target.value)}})}),Object(R.jsx)(l.a,{p:2,children:Object(R.jsx)(u.a,{children:"Password"})}),Object(R.jsx)(l.a,{p:2,children:Object(R.jsx)(W.a,{type:"password",id:"outlined-basic",label:"password",variant:"outlined",onChange:function(e){return o(e.target.value)}})}),Object(R.jsx)(l.a,{p:2,children:Object(R.jsx)(d.a,{onClick:function(e){e.preventDefault(),f(function(e){var t=e.email,n=e.password;return function(e){var a=JSON.stringify({email:t,password:n});O.a.post("".concat(U,"/auth/login"),a,{headers:{"Content-Type":"application/json"}}).then((function(t){return e({type:g,payload:t.data})})).catch((function(t){e(w(t.response.data,t.response.status,"LOGIN_FAIL")),e({type:m})}))}}({email:n,password:s}))},variant:"contained",children:"Log In"})})]})]})})},se=n(5),le=n(205),oe=n(220),je=n(221),ue=n(222),de=n(223),be=n(224),he=n(75),Oe=n(4),pe=Object(Oe.a)(le.a)((function(e){var t,n=e.theme;return t={},Object(se.a)(t,"&.".concat(he.a.head),{backgroundColor:n.palette.common.black,color:n.palette.common.white}),Object(se.a)(t,"&.".concat(he.a.body),{fontSize:14}),t})),xe=Object(Oe.a)(oe.a)((function(e){return{"&:nth-of-type(odd)":{backgroundColor:e.theme.palette.action.hover},"&:last-child td, &:last-child th":{border:0}}})),fe=function(){var e=Object(b.c)((function(e){return e.auth})),t=Object(b.c)((function(e){return e.userUrl.userUrls})),n=Object(a.useState)([]),c=Object(F.a)(n,2),r=c[0],i=c[1];return Object(a.useEffect)((function(){e.isAuthenticated?(i(t),console.log(r)):i([])}),[]),Object(R.jsx)(G.a,{children:e.isAuthenticated&&r[0]?Object(R.jsx)(je.a,{component:H.a,children:Object(R.jsxs)(ue.a,{sx:{minWidth:200},"aria-label":"customized table",children:[Object(R.jsx)(de.a,{children:Object(R.jsxs)(oe.a,{children:[Object(R.jsx)(pe,{align:"center",children:"ShortenedUrl"}),Object(R.jsx)(pe,{align:"center",children:"Clicks"}),Object(R.jsx)(pe,{align:"center",children:"User"})]})}),Object(R.jsx)(be.a,{children:r[0].map((function(e,t){return Object(R.jsxs)(xe,{children:[Object(R.jsx)(pe,{align:"center",children:Object(R.jsx)(P.a,{href:e.shortenedUrl,children:e.shortenedUrl})}),Object(R.jsx)(pe,{align:"center",children:e.clicks}),Object(R.jsx)(pe,{align:"center",children:e.ownedBy})]},t)}))})]})}):Object(R.jsx)(u.a,{variant:"h5",children:Object(R.jsx)(P.a,{href:"/login",children:"Please Log In"})})})},ge=function(){var e=Object(b.b)(),t=Object(b.c)((function(e){return e.auth})).isAuthenticated;return console.log({isAuthenticatedState:t}),Object(a.useEffect)((function(){e(N)}),[e]),Object(R.jsxs)(ae.a,{children:[Object(R.jsx)(L,{}),Object(R.jsxs)(k.d,{children:[Object(R.jsx)(k.b,{exact:!0,path:"/",component:ne}),Object(R.jsx)(k.b,{path:"/register",exact:!0,component:re}),Object(R.jsx)(k.b,{path:"/login",exact:!0,component:ie}),Object(R.jsx)(k.b,{path:"/myurls",exact:!0,component:fe})]})]})},me=n(31),ve=n(98),ye=n(99),Se=n.n(ye),Ee=n(19),Ce={urls:[]};var we={msg:{},status:null,id:null};var Ue={token:localStorage.getItem("token"),isAuthenticated:!!localStorage.getItem("token"),isLoading:!1,user:null};var ke={userUrls:[]};var Re={key:"root",storage:Se.a,whitelist:["userUrl"]},Le=Object(me.b)({ur:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ce,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH":return Object(Ee.a)(Object(Ee.a)({},e),{},{urls:t.payload});case"CREATE":return Object(Ee.a)(Object(Ee.a)({},e),{},{urls:[t.payload]});default:return e}},err:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:we,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E:return{msg:t.payload.msg,status:t.payload.status,id:t.payload.id};case C:return{msg:{},status:null,id:null};default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ue,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p:return Object(Ee.a)(Object(Ee.a)({},e),{},{isLoading:!0});case x:return Object(Ee.a)(Object(Ee.a)({},e),{},{isAuthenticated:!0,isLoading:!1,user:t.payload});case g:case y:return localStorage.setItem("token",t.payload.token),Object(Ee.a)(Object(Ee.a)(Object(Ee.a)({},e),t.payload),{},{isAuthenticated:!0,isLoading:!1});case f:case m:case v:case S:return localStorage.removeItem("token"),Object(Ee.a)(Object(Ee.a)({},e),{},{token:null,user:null,isAuthenticated:!1,isLoading:!1});default:return e}},userUrl:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ke,t=arguments.length>1?arguments[1]:void 0;return"FETCH_USER_URLS"===t.type?Object(Ee.a)(Object(Ee.a)({},e),{},{userUrls:[t.payload]}):e}}),Ie=Object(s.a)(Re,Le),_e=n(100),Te=Object(me.d)(Ie,Object(me.c)(Object(me.a)(ve.a),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__())),Ae=Object(s.b)(Te),Ne=function(){return Object(R.jsx)(b.a,{store:Te,children:Object(R.jsx)(_e.a,{persistor:Ae,children:Object(R.jsx)(ge,{})})})},De=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,226)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),a(e),c(e),r(e),i(e)}))};i.a.render(Object(R.jsx)(c.a.StrictMode,{children:Object(R.jsx)(Ne,{})}),document.getElementById("root")),De()}},[[155,1,2]]]);
//# sourceMappingURL=main.ec897934.chunk.js.map