(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{115:function(e,t,n){},149:function(e,t,n){},153:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),r=n(29),i=n.n(r),l=(n(115),n(57)),s=n(199),o=n(200),j=n(202),u=n(203),d=n(204),b=n(15),h=n(37),O=n.n(h),p="USER_LOADING",x="USER_LOADED",f="AUTH_ERROR",g="LOGIN_SUCCESS",v="LOGIN_FAIL",m="LOGOUT_SUCCESS",y="REGISTER_SUCCESS",S="REGISTER_FAIL",E="GET_ERRORS",w="CLEAR_ERRORS",C=function(e,t,n){return{type:E,payload:{msg:e,status:t,id:n}}},U=n(16),L=n(1),R=function(){var e=Object(b.c)((function(e){return e.auth})),t=Object(b.b)(),n=Object(U.g)();return Object(L.jsx)(s.a,{sx:{flexGrow:1},children:Object(L.jsx)(o.a,{position:"static",children:Object(L.jsxs)(j.a,{children:[Object(L.jsx)(u.a,{variant:"h3",component:"div",sx:{flexGrow:1},children:"TinyUrl"}),Object(L.jsx)(d.a,{onClick:function(e){e.preventDefault(),n.push("/")},color:"inherit",children:"Home"}),Object(L.jsx)(d.a,{onClick:function(e){e.preventDefault(),n.push("/myurls")},color:"inherit",children:"MyUrls"}),e.isAuthenticated?Object(L.jsx)(d.a,{onClick:function(e){e.preventDefault(),t({type:m})},color:"inherit",children:"Logout"}):Object(L.jsx)(d.a,{href:"/login",color:"inherit",children:"SignIn"}),Object(L.jsx)(d.a,{href:"/register",color:"inherit",children:"SignUp"})]})})})},_=n(52),k=n.n(_),A=n(72),T=O.a.create({baseURL:"https://tinyurl-mern.herokuapp.com"}),I=function(){var e=Object(A.a)(k.a.mark((function e(t){var n,c;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,T.get("/get");case 3:n=e.sent,c=n.data,t({type:"FETCH",payload:c}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),D=function(e){return function(t){var n={email:e};O.a.post("/users",n,{headers:{"Content-Type":"application/json"}}).then((function(e){return t({type:"FETCH_USER_URLS",payload:e.data})})).catch((function(e){console.log(e)}))}},F=n(12),N=n(201),G=n(195),H=n(205),P=n(93),W=n(94),B=n.n(W),J=n(187),X=n(188),z=n(189),M=n(190),V=n(191),q=n(192),K=function(){var e=Object(b.c)((function(e){return e.ur.urls}));return Object(L.jsxs)(s.a,{display:"flex",flexDirection:"row",children:[Object(L.jsx)(s.a,{p:2,children:Object(L.jsx)(P.CopyToClipboard,{text:e[0]?e[0].shortenedUrl:null,children:Object(L.jsx)(B.a,{size:60,children:Object(L.jsx)(d.a,{onClick:function(e){e.preventDefault()},children:"Copy"})})})}),Object(L.jsx)(s.a,{p:2,children:Object(L.jsx)(J.a,{url:e[0]?e[0].shortenedUrl:null,children:Object(L.jsx)(X.a,{round:!0})})}),Object(L.jsx)(s.a,{p:2,children:Object(L.jsx)(z.a,{url:e[0]?e[0].shortenedUrl:null,children:Object(L.jsx)(M.a,{round:!0})})}),Object(L.jsx)(s.a,{p:2,children:Object(L.jsx)(V.a,{url:e[0]?e[0].shortenedUrl:null,children:Object(L.jsx)(q.a,{round:!0})})})]})},Q=(n(149),function(){var e=Object(c.useState)({full:""}),t=Object(F.a)(e,2),n=t[0],a=t[1],r=Object(b.c)((function(e){return e.ur.urls})),i=Object(b.c)((function(e){return e.auth})),l=i.isAuthenticated,o=Object(b.b)();return Object(L.jsx)(s.a,{sx:{display:"flex",flexDirection:"column",flexWrap:"wrap","& > :not(style)":{m:1,width:500,height:550}},children:Object(L.jsx)(N.a,{elevation:3,children:Object(L.jsxs)("form",{children:[Object(L.jsx)(s.a,{p:2,children:Object(L.jsx)(u.a,{variant:"h6",children:"Enter a long URL to make a TinyURL"})}),Object(L.jsx)(s.a,{p:2,children:Object(L.jsx)(G.a,{id:"outlined-basic",label:"url",type:"text",variant:"outlined",value:n.full,onChange:function(e){a(l?{full:e.target.value,ownedBy:i.user.email}:{full:e.target.value})},fullWidth:!0})}),Object(L.jsx)(s.a,{p:2,children:Object(L.jsx)(u.a,{variant:"h6",children:"Tiny Url"})}),Object(L.jsx)(s.a,{p:2,children:Object(L.jsx)("div",{className:"textField",children:Object(L.jsx)(u.a,{variant:"h6",children:r[0]?Object(L.jsx)(H.a,{href:r[0].shortenedUrl,children:r[0].shortenedUrl}):null})})}),Object(L.jsxs)(s.a,{p:2,children:[Object(L.jsx)(u.a,{variant:"h6",children:"Share"}),Object(L.jsx)(K,{})]}),Object(L.jsx)(s.a,{p:2,children:Object(L.jsx)(d.a,{variant:"contained",onClick:function(e){var t;e.preventDefault(),o((t=n,function(){var e=Object(A.a)(k.a.mark((function e(n){var c,a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r=t,T.post("/create",r);case 3:c=e.sent,a=c.data,n({type:"CREATE",payload:a}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}var r}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()))},children:"Make TinyURL"})})]})})})}),Y=n(46),Z=n(197),$=function(){var e=Object(c.useState)(""),t=Object(F.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(""),i=Object(F.a)(r,2),l=i[0],o=i[1],j=Object(c.useState)(""),h=Object(F.a)(j,2),p=h[0],x=h[1],f=Object(c.useState)(null),g=Object(F.a)(f,2),v=g[0],m=g[1],E=Object(c.useState)({full:""}),w=Object(F.a)(E,2),R=(w[0],w[1],Object(b.b)()),_=Object(b.c)((function(e){return e.auth})),k=Object(b.c)((function(e){return e.err}));if(Object(c.useEffect)((function(){"REGISTER_FAIL"===k.id?m(k.msg.msg):m(null),_.isAuthenticated&&console.log(_.user.email)}),[_]),_.isAuthenticated)return Object(L.jsx)(U.a,{to:"/"});return Object(L.jsx)(s.a,{sx:{display:"flex",flexDirection:"column",flexWrap:"wrap","& > :not(style)":{m:1,width:500,height:500}},children:Object(L.jsxs)(N.a,{elevation:3,children:[v?Object(L.jsx)(Z.a,{severity:"warning",children:v}):null,Object(L.jsxs)("form",{children:[Object(L.jsx)(s.a,{p:2,children:Object(L.jsx)(u.a,{children:"Name"})}),Object(L.jsx)(s.a,{p:2,children:Object(L.jsx)(G.a,{type:"text",id:"outlined-basic",label:"Name",variant:"outlined",onChange:function(e){return a(e.target.value)}})}),Object(L.jsx)(s.a,{p:2,children:Object(L.jsx)(u.a,{children:"Email"})}),Object(L.jsx)(s.a,{p:2,children:Object(L.jsx)(G.a,{type:"text",id:"outlined-basic",label:"Email",variant:"outlined",onChange:function(e){return o(e.target.value)}})}),Object(L.jsx)(s.a,{p:2,children:Object(L.jsx)(u.a,{children:"Password"})}),Object(L.jsx)(s.a,{p:2,children:Object(L.jsx)(G.a,{id:"outlined-basic",type:"password",label:"password",variant:"outlined",onChange:function(e){return x(e.target.value)}})}),Object(L.jsx)(s.a,{p:2,children:Object(L.jsx)(d.a,{onClick:function(e){e.preventDefault(),R(function(e){var t=e.name,n=e.email,c=e.password;return function(e){var a=JSON.stringify({name:t,email:n,password:c});O.a.post("/user",a,{headers:{"Content-Type":"application/json"}}).then((function(t){return e({type:y,payload:t.data})})).catch((function(t){e(C(t.response.data,t.response.status,"REGISTER_FAIL")),e({type:S})}))}}({name:n,email:l,password:p})),_.isAuthenticated&&R(D(_.user.email))},variant:"contained",children:"SignUp"})})]})]})})},ee=function(){var e=Object(c.useState)(""),t=Object(F.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(""),i=Object(F.a)(r,2),l=i[0],o=i[1],j=Object(c.useState)(null),h=Object(F.a)(j,2),p=h[0],x=h[1],f=Object(b.b)(),m=Object(b.c)((function(e){return e.auth})),y=Object(b.c)((function(e){return e.err}));if(Object(c.useEffect)((function(){"LOGIN_FAIL"===y.id?x(y.msg.msg):x(null),m.isAuthenticated&&(console.log(m.user.email),f(D(m.user.email)))}),[m]),m.isAuthenticated)return Object(L.jsx)(U.a,{to:"/"});return Object(L.jsx)(s.a,{sx:{display:"flex",flexDirection:"column",flexWrap:"wrap","& > :not(style)":{m:1,width:500,height:500}},children:Object(L.jsxs)(N.a,{elevation:3,children:[p?Object(L.jsx)(Z.a,{severity:"warning",children:p}):null,Object(L.jsxs)("form",{children:[Object(L.jsx)(s.a,{p:2,children:Object(L.jsx)(u.a,{children:"Email"})}),Object(L.jsx)(s.a,{p:2,children:Object(L.jsx)(G.a,{type:"text",id:"outlined-basic",label:"Email",variant:"outlined",onChange:function(e){return a(e.target.value)}})}),Object(L.jsx)(s.a,{p:2,children:Object(L.jsx)(u.a,{children:"Password"})}),Object(L.jsx)(s.a,{p:2,children:Object(L.jsx)(G.a,{type:"password",id:"outlined-basic",label:"password",variant:"outlined",onChange:function(e){return o(e.target.value)}})}),Object(L.jsx)(s.a,{p:2,children:Object(L.jsx)(d.a,{onClick:function(e){e.preventDefault(),f(function(e){var t=e.email,n=e.password;return function(e){var c=JSON.stringify({email:t,password:n});O.a.post("/auth/login",c,{headers:{"Content-Type":"application/json"}}).then((function(t){return e({type:g,payload:t.data})})).catch((function(t){e(C(t.response.data,t.response.status,"LOGIN_FAIL")),e({type:v})}))}}({email:n,password:l}))},variant:"contained",children:"Log In"})})]})]})})},te=n(5),ne=n(194),ce=n(206),ae=n(207),re=n(208),ie=n(209),le=n(210),se=n(211),oe=n(73),je=n(4),ue=Object(je.a)(ne.a)((function(e){var t,n=e.theme;return t={},Object(te.a)(t,"&.".concat(oe.a.head),{backgroundColor:n.palette.common.black,color:n.palette.common.white}),Object(te.a)(t,"&.".concat(oe.a.body),{fontSize:14}),t})),de=Object(je.a)(ce.a)((function(e){return{"&:nth-of-type(odd)":{backgroundColor:e.theme.palette.action.hover},"&:last-child td, &:last-child th":{border:0}}})),be=function(){var e=Object(b.c)((function(e){return e.auth})),t=Object(b.c)((function(e){return e.userUrl.userUrls})),n=Object(c.useState)([]),a=Object(F.a)(n,2),r=a[0],i=a[1];return Object(c.useEffect)((function(){e.isAuthenticated?(i(t),console.log(r)):console.log("error")}),[]),Object(L.jsx)(ae.a,{children:e.isAuthenticated&&r[0]?Object(L.jsx)(re.a,{component:N.a,children:Object(L.jsxs)(ie.a,{sx:{minWidth:200},"aria-label":"customized table",children:[Object(L.jsx)(le.a,{children:Object(L.jsxs)(ce.a,{children:[Object(L.jsx)(ue,{align:"center",children:"ShortenedUrl"}),Object(L.jsx)(ue,{align:"center",children:"Clicks"}),Object(L.jsx)(ue,{align:"center",children:"User"})]})}),Object(L.jsx)(se.a,{children:r[0].map((function(e,t){return Object(L.jsxs)(de,{children:[Object(L.jsx)(ue,{align:"center",children:Object(L.jsx)(H.a,{href:e.shortenedUrl,children:e.shortenedUrl})}),Object(L.jsx)(ue,{align:"center",children:e.clicks}),Object(L.jsx)(ue,{align:"center",children:e.ownedBy})]},t)}))})]})}):Object(L.jsx)(u.a,{variant:"h5",children:Object(L.jsx)(H.a,{href:"/login",children:"Please Log In"})})})},he=function(){var e=Object(b.b)(),t=Object(b.c)((function(e){return e.auth})).isAuthenticated;return console.log({isAuthenticatedState:t}),Object(c.useEffect)((function(){e(I)}),[e]),Object(L.jsxs)(Y.a,{children:[Object(L.jsx)(R,{}),Object(L.jsxs)(U.d,{children:[Object(L.jsx)(U.b,{exact:!0,path:"/",component:Q}),Object(L.jsx)(U.b,{path:"/register",exact:!0,component:$}),Object(L.jsx)(U.b,{path:"/login",exact:!0,component:ee}),Object(L.jsx)(U.b,{path:"/myurls",exact:!0,component:be})]})]})},Oe=n(31),pe=n(96),xe=n(97),fe=n.n(xe),ge=n(17),ve={urls:[]};var me={msg:{},status:null,id:null};var ye={token:localStorage.getItem("token"),isAuthenticated:!!localStorage.getItem("token"),isLoading:!1,user:null};var Se={userUrls:[]};var Ee={key:"root",storage:fe.a,whitelist:["userUrl"]},we=Object(Oe.b)({ur:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ve,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH":return Object(ge.a)(Object(ge.a)({},e),{},{urls:t.payload});case"CREATE":return Object(ge.a)(Object(ge.a)({},e),{},{urls:[t.payload]});default:return e}},err:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:me,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E:return{msg:t.payload.msg,status:t.payload.status,id:t.payload.id};case w:return{msg:{},status:null,id:null};default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ye,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p:return Object(ge.a)(Object(ge.a)({},e),{},{isLoading:!0});case x:return Object(ge.a)(Object(ge.a)({},e),{},{isAuthenticated:!0,isLoading:!1,user:t.payload});case g:case y:return localStorage.setItem("token",t.payload.token),Object(ge.a)(Object(ge.a)(Object(ge.a)({},e),t.payload),{},{isAuthenticated:!0,isLoading:!1});case f:case v:case m:case S:return localStorage.removeItem("token"),Object(ge.a)(Object(ge.a)({},e),{},{token:null,user:null,isAuthenticated:!1,isLoading:!1});default:return e}},userUrl:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Se,t=arguments.length>1?arguments[1]:void 0;return"FETCH_USER_URLS"===t.type?Object(ge.a)(Object(ge.a)({},e),{},{userUrls:[t.payload]}):e}}),Ce=Object(l.a)(Ee,we),Ue=n(98),Le=Object(Oe.d)(Ce,Object(Oe.c)(Object(Oe.a)(pe.a),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__())),Re=Object(l.b)(Le),_e=function(){return Object(L.jsx)(b.a,{store:Le,children:Object(L.jsx)(Ue.a,{persistor:Re,children:Object(L.jsx)(he,{})})})},ke=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,212)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),c(e),a(e),r(e),i(e)}))};i.a.render(Object(L.jsx)(a.a.StrictMode,{children:Object(L.jsx)(_e,{})}),document.getElementById("root")),ke()}},[[153,1,2]]]);
//# sourceMappingURL=main.618add7c.chunk.js.map